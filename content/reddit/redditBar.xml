<?xml version="1.0"?>
<!DOCTYPE reddit SYSTEM "chrome://socialite/locale/reddit.dtd">
<bindings xmlns="http://www.mozilla.org/xbl" xmlns:xbl="http://www.mozilla.org/xbl"
	xmlns:xul="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul">

	<binding id="redditbarcontent" extends="chrome://socialite/content/socialiteBar.xml#socialitebarcontent">
		<content>
			<xul:hbox anonid="container" flex="1" align="center">
				<xul:label anonid="score" class="reddit-score"/>
				<xul:description anonid="title" flex="1"/>
				<xul:label anonid="subreddit" class="subreddit"/>
				<xul:spacer flex="9999"/>
				<xul:button anonid="buttonLike" type="checkbox" label="&like.label;" accesskey="&like.accesskey;" autoCheck="false"/>
				<xul:button anonid="buttonDislike" type="checkbox" label="&dislike.label;" accesskey="&dislike.accesskey;" autoCheck="false"/>
				<xul:button anonid="buttonComments" label="" accesskey="&comments.accesskey;"/>
				<xul:button anonid="buttonHide" label="&hide.label;" accesskey="&hide.accesskey;"/>
				<xul:button anonid="buttonRandom" label="&random.label;" accesskey="&random.accesskey;"/>
				<children/>
			</xul:hbox>
		</content>
		
		<resources>
			<stylesheet src="chrome://socialite/skin/reddit.css"/>
		</resources>
		
		<implementation>
			<field name="uiState">new (Components.utils.import("resource://socialite/reddit/redditLinkInfo.jsm").RedditLinkInfoState)()</field>

			<constructor>
				this.updateState();
				this.update();
			</constructor>

     	<method name="update">
        <body>
          <![CDATA[
          	// Title
						var title = document.getAnonymousElementByAttribute(this, "anonid", "title");
						title.textContent = this.uiState.title;
						
						// Like/Dislike buttons
						var REDDIT_LIKE_INACTIVE_IMAGE = "chrome://socialite/content/reddit/upgray.png";
						var REDDIT_LIKE_ACTIVE_IMAGE = "chrome://socialite/content/reddit/upmod.png";
						var REDDIT_DISLIKE_INACTIVE_IMAGE = "chrome://socialite/content/reddit/downgray.png";
						var REDDIT_DISLIKE_ACTIVE_IMAGE = "chrome://socialite/content/reddit/downmod.png";
						
						var buttonLike = document.getAnonymousElementByAttribute(this, "anonid", "buttonLike");
						var buttonDislike = document.getAnonymousElementByAttribute(this, "anonid", "buttonDislike");
						if (this.uiState.isLiked == true) {
					    buttonLike.image = REDDIT_LIKE_ACTIVE_IMAGE;
					    buttonLike.checked = true;
					  } else {
					    buttonLike.image = REDDIT_LIKE_INACTIVE_IMAGE;
					    buttonLike.checked = false;
					  }
					  
					  if (this.uiState.isLiked == false) {
					    buttonDislike.image = REDDIT_DISLIKE_ACTIVE_IMAGE;
					    buttonDislike.checked = true;
					  } else {
					    buttonDislike.image = REDDIT_DISLIKE_INACTIVE_IMAGE;
					    buttonDislike.checked = false;
					  }
          ]]>
        </body>
      </method>
      
		</implementation>
		
	</binding>
	
</bindings>