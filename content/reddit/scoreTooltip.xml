<?xml version="1.0"?>
<!DOCTYPE reddit SYSTEM "chrome://socialite/locale/socialite.dtd">
<bindings
  xmlns="http://www.mozilla.org/xbl"
  xmlns:xbl="http://www.mozilla.org/xbl"
  xmlns:xul="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul">
  
  <binding id="scoretooltip" extends="chrome://global/content/bindings/popup.xml#tooltip">

    <content>
      <xul:grid>
        <xul:columns>
          <xul:column flex="0"/>
          <xul:column flex="1"/>
        </xul:columns>

        <xul:rows>
          <xul:row align="center">
            <xul:image src="chrome://socialite/content/reddit/upmod.png"/>
            <xul:label anonid="likeCount" value="&unknown;" xbl:inherits="value=likeCount"/>
          </xul:row>
          <xul:row align="center">
            <xul:image src="chrome://socialite/content/reddit/downmod.png"/>
            <xul:label anonid="dislikeCount" value="&unknown;" xbl:inherits="value=dislikeCount"/>
          </xul:row>
        </xul:rows>
      </xul:grid>
    </content>

    <implementation>
      <field name="parent"/>
    </implementation>
    
    <handlers>
      <handler event="popupshowing">
      	if (this.parent) {
      		var parent = this.parent; 
      	} else {
      		var parent = document.getBindingParent(this);
      	}
        this.setAttribute("likeCount", parent.uiState.likeCount || "&unknown;");
        this.setAttribute("dislikeCount", parent.uiState.dislikeCount || "&unknown;");
      </handler>
    </handlers>

  </binding>
</bindings>
